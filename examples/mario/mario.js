!function(n){var t,e=n.top,r=n,a=n.nil,i=n.breaker,o=n.slice,l=n.module,u=n.range,c=n.hash2,s=n.klass,$=n.gvars;return n.add_stubs(["$try_convert","$native?","$respond_to?","$to_n","$raise","$inspect","$Native","$end_with?","$define_method","$[]","$convert","$call","$to_proc","$new","$each","$native_reader","$native_writer","$extend","$to_a","$to_ary","$include","$method_missing","$bind","$instance_method","$[]=","$slice","$-","$length","$enum_for","$===","$>=","$<<","$==","$instance_variable_set","$members","$each_with_index","$each_pair","$name"]),function(t){var e,r=l(t,"Native"),i=r._proto,s=r._scope;n.defs(r,"$is_a?",function(n,t){var e=this;try{return n instanceof e.$try_convert(t)}catch(r){return!1}}),n.defs(r,"$try_convert",function(n){var t=this;return t["$native?"](n)?n:n["$respond_to?"]("to_n")?n.$to_n():a}),n.defs(r,"$convert",function(t){var e,r=this;return r["$native?"](t)?t:t["$respond_to?"]("to_n")?t.$to_n():void r.$raise(null==(e=s.ArgumentError)?n.cm("ArgumentError"):e,""+t.$inspect()+" isn't native")}),n.defs(r,"$call",e=function(n,t,r){var i=this,l=e._p,u=l||a;r=o.call(arguments,2),e._p=null;var c=n[t];if(c instanceof Function){for(var s=new Array(r.length),$=0,_=r.length;_>$;$++){var v=r[$],d=i.$try_convert(v);s[$]=d===a?v:d}return u!==a&&s.push(u),i.$Native(c.apply(n,s))}return i.$Native(c)}),function(t){var e=l(t,"Helpers"),r=e._proto,i=e._scope;r.$alias_native=function(t,e,r){var l,s,$,_,v,d,f,p=this,m=a;return null==e&&(e=t),null==r&&(r=c([],{})),(l=e["$end_with?"]("="))===a||l._isBoolean&&1!=l?(l=m=r["$[]"]("as"))===a||l._isBoolean&&1!=l?(l=(d=p).$define_method,l._p=(f=function(t){var r,l,u,c,s=f._s||this;return null==s["native"]&&(s["native"]=a),t=o.call(arguments,0),r=f._p||a,f._p=null,(l=(u=null==(c=i.Native)?n.cm("Native"):c).$call,l._p=r.$to_proc(),l).apply(u,[s["native"],e].concat(t))},f._s=p,f),l).call(d,t):(l=(_=p).$define_method,l._p=(v=function(t){var r,l,u,c,s,$=v._s||this;return null==$["native"]&&($["native"]=a),t=o.call(arguments,0),r=v._p||a,v._p=null,(l=value=(u=(c=null==(s=i.Native)?n.cm("Native"):s).$call,u._p=r.$to_proc(),u).apply(c,[$["native"],e].concat(t)))===a||l._isBoolean&&1!=l?a:m.$new(value.$to_n())},v._s=p,v),l).call(_,t):(l=(s=p).$define_method,l._p=($=function(t){var r,o=$._s||this;return null==o["native"]&&(o["native"]=a),null==t&&(t=a),o["native"][e["$[]"](u(0,-2,!1))]=(null==(r=i.Native)?n.cm("Native"):r).$convert(t),t},$._s=p,$),l).call(s,t)},r.$native_reader=function(n){var t,e,r,i=this;return n=o.call(arguments,0),(t=(e=n).$each,t._p=(r=function(n){var t,e,i,o=r._s||this;return null==n&&(n=a),(t=(e=o).$define_method,t._p=(i=function(){var t=i._s||this;return null==t["native"]&&(t["native"]=a),t.$Native(t["native"][n])},i._s=o,i),t).call(e,n)},r._s=i,r),t).call(e)},r.$native_writer=function(n){var t,e,r,i=this;return n=o.call(arguments,0),(t=(e=n).$each,t._p=(r=function(n){var t,e,i,o=r._s||this;return null==n&&(n=a),(t=(e=o).$define_method,t._p=(i=function(t){var e=i._s||this;return null==e["native"]&&(e["native"]=a),null==t&&(t=a),e.$Native(e["native"][n]=t)},i._s=o,i),t).call(e,""+n+"=")},r._s=i,r),t).call(e)},r.$native_accessor=function(n){var t,e,r=this;return n=o.call(arguments,0),(t=r).$native_reader.apply(t,[].concat(n)),(e=r).$native_writer.apply(e,[].concat(n))},n.donate(e,["$alias_native","$native_reader","$native_writer","$native_accessor"])}(r),n.defs(r,"$included",function(t){var e;return t.$extend(null==(e=s.Helpers)?n.cm("Helpers"):e)}),i.$initialize=function(t){var e,r,i=this;return((e=(null==(r=s.Kernel)?n.cm("Kernel"):r)["$native?"](t))===a||e._isBoolean&&1!=e)&&(null==(e=s.Kernel)?n.cm("Kernel"):e).$raise(null==(e=s.ArgumentError)?n.cm("ArgumentError"):e,""+t.$inspect()+" isn't native"),i["native"]=t},i.$to_n=function(){var n=this;return null==n["native"]&&(n["native"]=a),n["native"]},n.donate(r,["$initialize","$to_n"])}(e),function(t){var e,r=l(t,"Kernel"),i=r._proto,u=r._scope;i["$native?"]=function(n){return null==n||!n._klass},i.$Native=function(t){var e,r,i=this;return(e=null==t)===a||e._isBoolean&&1!=e?(e=i["$native?"](t))===a||e._isBoolean&&1!=e?t:(null==(e=(null==(r=u.Native)?n.cm("Native"):r)._scope).Object?e.cm("Object"):e.Object).$new(t):a},i.$Array=e=function(t,r){var i,l,c,s,$=this,_=e._p,v=_||a;return r=o.call(arguments,1),e._p=null,null==t||t===a?[]:$["$native?"](t)?(i=(l=null==(c=(null==(s=u.Native)?n.cm("Native"):s)._scope).Array?c.cm("Array"):c.Array).$new,i._p=v.$to_proc(),i).apply(l,[t].concat(r)).$to_a():t["$respond_to?"]("to_ary")?t.$to_ary():t["$respond_to?"]("to_a")?t.$to_a():[t]},n.donate(r,["$native?","$Native","$Array"])}(e),function(t,e){function r(){}var l,u,$,_,v=r=s(t,e,"Object",r),d=v._proto,f=v._scope;return d["native"]=a,v.$include(null==(l=f.Native)?n.cm("Native"):l),n.defn(v,"$==",function(t){var e,r=this;return r["native"]===(null==(e=f.Native)?n.cm("Native"):e).$try_convert(t)}),n.defn(v,"$has_key?",function(t){var e=this;return n.hasOwnProperty.call(e["native"],t)}),n.defn(v,"$key?",d["$has_key?"]),n.defn(v,"$include?",d["$has_key?"]),n.defn(v,"$member?",d["$has_key?"]),n.defn(v,"$each",u=function(t){var e,r=this,l=u._p,c=l||a;if(t=o.call(arguments,0),u._p=null,c!==a){for(var s in r["native"])(e=n.$yieldX(c,[s,r["native"][s]]))===i?i.$v:e;return r}return(e=r).$method_missing.apply(e,["each"].concat(t))}),n.defn(v,"$[]",function(t){var e,r=this,a=r["native"][t];return a instanceof Function?a:(null==(e=n.Object._scope.Native)?n.cm("Native"):e).$call(r["native"],t)}),n.defn(v,"$[]=",function(t,e){var r,i=this,o=a;return o=(null==(r=f.Native)?n.cm("Native"):r).$try_convert(e),i["native"][t]=(r=o===a)===a||r._isBoolean&&1!=r?o:e}),n.defn(v,"$merge!",function(t){var e,r=this,t=(null==(e=f.Native)?n.cm("Native"):e).$convert(t);for(var a in t)r["native"][a]=t[a];return r}),n.defn(v,"$respond_to?",function(t,e){var r,a=this;return null==e&&(e=!1),(null==(r=f.Kernel)?n.cm("Kernel"):r).$instance_method("respond_to?").$bind(a).$call(t,e)}),n.defn(v,"$respond_to_missing?",function(t){var e=this;return n.hasOwnProperty.call(e["native"],t)}),n.defn(v,"$method_missing",$=function(t,e){var r,i,l,u=this,c=$._p,s=c||a;return e=o.call(arguments,1),$._p=null,"="===t.charAt(t.length-1)?u["$[]="](t.$slice(0,t.$length()["$-"](1)),e["$[]"](0)):(r=(i=null==(l=n.Object._scope.Native)?n.cm("Native"):l).$call,r._p=s.$to_proc(),r).apply(i,[u["native"],t].concat(e))}),n.defn(v,"$nil?",function(){return!1}),n.defn(v,"$is_a?",function(t){var e=this;return n.is_a(e,t)}),n.defn(v,"$kind_of?",d["$is_a?"]),n.defn(v,"$instance_of?",function(n){var t=this;return t._klass===n}),n.defn(v,"$class",function(){var n=this;return n._klass}),n.defn(v,"$to_a",_=function(t){var e,r,i,o,l=this,u=_._p,s=u||a;return null==t&&(t=c([],{})),_._p=null,(e=(r=null==(i=(null==(o=f.Native)?n.cm("Native"):o)._scope).Array?i.cm("Array"):i.Array).$new,e._p=s.$to_proc(),e).call(r,l["native"],t).$to_a()}),n.defn(v,"$inspect",function(){var n=this;return"#<Native:"+String(n["native"])+">"}),a&&"inspect"}(null==(t=r.Native)?n.cm("Native"):t,null==(t=r.BasicObject)?n.cm("BasicObject"):t),function(t,e){function r(){}var o,l,u,$=r=s(t,e,"Array",r),_=$._proto,v=$._scope;return _.named=_["native"]=_.get=_.block=_.set=_.length=a,$.$include(null==(o=v.Native)?n.cm("Native"):o),$.$include(null==(o=v.Enumerable)?n.cm("Enumerable"):o),_.$initialize=l=function(t,e){var r,i=this,o=l._p,u=o||a;return null==e&&(e=c([],{})),l._p=null,n.find_super_dispatcher(i,"initialize",l,null).apply(i,[t]),i.get=(r=e["$[]"]("get"))!==!1&&r!==a?r:e["$[]"]("access"),i.named=e["$[]"]("named"),i.set=(r=e["$[]"]("set"))!==!1&&r!==a?r:e["$[]"]("access"),i.length=(r=e["$[]"]("length"))!==!1&&r!==a?r:"length",i.block=u,(r=null==i.$length())===a||r._isBoolean&&1!=r?a:i.$raise(null==(r=v.ArgumentError)?n.cm("ArgumentError"):r,"no length found on the array-like object")},_.$each=u=function(){var t=this,e=u._p,r=e||a;if(u._p=null,r===!1||r===a)return t.$enum_for("each");for(var o=0,l=t.$length();l>o;o++){var c=n.$yield1(r,t["$[]"](o));if(c===i)return i.$v}return t},_["$[]"]=function(t){var e,r=this,i=a,o=a;return i=function(){return o=t,(null==(e=v.String)?n.cm("String"):e)["$==="](o)||(null==(e=v.Symbol)?n.cm("Symbol"):e)["$==="](o)?(e=r.named)===a||e._isBoolean&&1!=e?r["native"][t]:r["native"][r.named](t):(null==(e=v.Integer)?n.cm("Integer"):e)["$==="](o)?(e=r.get)===a||e._isBoolean&&1!=e?r["native"][t]:r["native"][r.get](t):a}(),i!==!1&&i!==a?(e=r.block)===a||e._isBoolean&&1!=e?r.$Native(i):r.block.$call(i):a},_["$[]="]=function(t,e){var r,i=this;return(r=i.set)===a||r._isBoolean&&1!=r?i["native"][t]=(null==(r=v.Native)?n.cm("Native"):r).$convert(e):i["native"][i.set](t,(null==(r=v.Native)?n.cm("Native"):r).$convert(e))},_.$last=function(n){var t=this,e=a,r=a;if(null==n&&(n=a),n!==!1&&n!==a){for(e=t.$length()["$-"](1),r=[];e["$>="](0);)r["$<<"](t["$[]"](e)),e=e["$-"](1);return r}return t["$[]"](t.$length()["$-"](1))},_.$length=function(){var n=this;return n["native"][n.length]},n.defn($,"$to_ary",_.$to_a),_.$inspect=function(){var n=this;return n.$to_a().$inspect()},a&&"inspect"}(null==(t=r.Native)?n.cm("Native"):t,null),function(n,t){function e(){}{var r=e=s(n,t,"Numeric",e),i=r._proto;r._scope}return i.$to_n=function(){var n=this;return n.valueOf()},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"Proc",e),i=r._proto;r._scope}return i.$to_n=function(){var n=this;return n},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"String",e),i=r._proto;r._scope}return i.$to_n=function(){var n=this;return n.valueOf()},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"Regexp",e),i=r._proto;r._scope}return i.$to_n=function(){var n=this;return n.valueOf()},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"MatchData",e),i=r._proto;r._scope}return i.matches=a,i.$to_n=function(){var n=this;return n.matches},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"Struct",e),i=r._proto;r._scope}return i.$initialize=function(n){var t,e,r,i,l,u=this,c=a;return n=o.call(arguments,0),(t=(e=n.$length()["$=="](1))?u["$native?"](n["$[]"](0)):e)===a||t._isBoolean&&1!=t?(t=(i=u.$members()).$each_with_index,t._p=(l=function(t,e){var r=l._s||this;return null==t&&(t=a),null==e&&(e=a),r.$instance_variable_set("@"+t,n["$[]"](e))},l._s=u,l),t).call(i):(c=n["$[]"](0),(t=(e=u.$members()).$each,t._p=(r=function(n){var t=r._s||this;return null==n&&(n=a),t.$instance_variable_set("@"+n,t.$Native(c[n]))},r._s=u,r),t).call(e))},i.$to_n=function(){var n,t,e,r=this,i=a;return i={},(n=(t=r).$each_pair,n._p=(e=function(n,t){e._s||this;return null==n&&(n=a),null==t&&(t=a),i[n]=t.$to_n()},e._s=r,e),n).call(t),i},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"Array",e),i=r._proto;r._scope}return i.$to_n=function(){for(var n=this,t=[],e=0,r=n.length;r>e;e++){var a=n[e];t.push(a["$respond_to?"]("to_n")?a.$to_n():a)}return t},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"Boolean",e),i=r._proto;r._scope}return i.$to_n=function(){var n=this;return n.valueOf()},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"Time",e),i=r._proto;r._scope}return i.$to_n=function(){var n=this;return n},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"NilClass",e),i=r._proto;r._scope}return i.$to_n=function(){return null},a&&"to_n"}(e,null),function(t,e){function r(){}var i,o=r=s(t,e,"Hash",r),l=o._proto,u=o._scope;return l.$initialize=i=function(t){var e,r=this,o=i._p,l=o||a;if(i._p=null,null!=t)if(t.constructor===Object){var c=r.map,s=r.keys;for(var $ in t){var _=t[$];c[$]=_&&_.constructor===Object?(null==(e=u.Hash)?n.cm("Hash"):e).$new(_):r.$Native(t[$]),s.push($)}}else r.none=t;else l!==a&&(r.proc=l);return r},l.$to_n=function(){for(var n=this,t={},e=n.keys,r=n.map,a=0,i=e.length;i>a;a++){var o=e[a],l=r[o];t[o]=l["$respond_to?"]("to_n")?l.$to_n():l}return t},a&&"to_n"}(e,null),function(n,t){function e(){}{var r=e=s(n,t,"Module",e),i=r._proto;r._scope}return i.$native_module=function(){var n=this;return Opal.global[n.$name()]=n},a&&"native_module"}(e,null),function(t,e){function r(){}{var a=r=s(t,e,"Class",r),i=a._proto;a._scope}return i.$native_alias=function(n,t){var e=this;return e._proto[n]=e._proto["$"+t]},n.defn(a,"$native_class",i.$native_module)}(e,null),$.$=$.global=e.$Native(Opal.global)}(Opal),function(n){var t=n.top,e=n.nil,r=n.breaker,a=n.slice,i=n.klass;n.add_stubs(["$include","$attr_reader","$expose","$alias_native","$[]=","$nil?","$is_a?","$to_n","$has_key?","$delete","$call","$gsub","$upcase","$[]","$compact","$map","$respond_to?","$<<","$Native","$new"]);var o,l=n.global;if(l.jQuery)o=jQuery;else{if(!l.Zepto)throw new Error("jQuery must be included before opal-jquery");o=Zepto.zepto.Z}return function(t,o){function l(){}var u,c,s,_,v,d=l=i(t,o,"Element",l),f=d._proto,p=d._scope;return d.$include(null==(u=p.Enumerable)?n.cm("Enumerable"):u),n.defs(d,"$find",function(n){return $(n)}),n.defs(d,"$[]",function(n){return $(n)}),n.defs(d,"$id",function(n){var t=document.getElementById(n);return t?$(t):e}),n.defs(d,"$new",function(n){return null==n&&(n="div"),$(document.createElement(n))}),n.defs(d,"$parse",function(n){return $(n)}),n.defs(d,"$expose",function(n){var t=this;n=a.call(arguments,0);for(var r,i=0,o=n.length;o>i;i++)r=n[i],t._proto["$"+r]=t._proto[r];return e}),d.$attr_reader("selector"),d.$expose("after","before","parent","parents","prepend","prev","remove"),d.$expose("hide","show","toggle","children","blur","closest","detach"),d.$expose("focus","find","next","siblings","text","trigger","append"),d.$expose("height","width","serialize","is","filter","last","first"),d.$expose("wrap","stop","clone","empty"),d.$expose("get","attr","prop"),n.defn(d,"$succ",f.$next),n.defn(d,"$<<",f.$append),d.$alias_native("[]=","attr"),d.$alias_native("add_class","addClass"),d.$alias_native("append_to","appendTo"),d.$alias_native("has_class?","hasClass"),d.$alias_native("html=","html"),d.$alias_native("remove_attr","removeAttr"),d.$alias_native("remove_class","removeClass"),d.$alias_native("text=","text"),d.$alias_native("toggle_class","toggleClass"),d.$alias_native("value=","val"),d.$alias_native("scroll_left=","scrollLeft"),d.$alias_native("scroll_left","scrollLeft"),d.$alias_native("remove_attribute","removeAttr"),d.$alias_native("slide_down","slideDown"),d.$alias_native("slide_up","slideUp"),d.$alias_native("slide_toggle","slideToggle"),d.$alias_native("fade_toggle","fadeToggle"),f.$to_n=function(){var n=this;return n},f["$[]"]=function(n){var t=this;return t.attr(n)||""},f.$add_attribute=function(n){var t=this;return t["$[]="](n,"")},f["$has_attribute?"]=function(n){var t=this;return!!t.attr(n)},f.$append_to_body=function(){var n=this;return n.appendTo(document.body)},f.$append_to_head=function(){var n=this;return n.appendTo(document.head)},f.$at=function(n){var t=this,r=t.length;return 0>n&&(n+=r),0>n||n>=r?e:$(t[n])},f.$class_name=function(){var n=this,t=n[0];return t&&t.className||""},f["$class_name="]=function(n){for(var t=this,e=0,r=t.length;r>e;e++)t[e].className=n;return t},f.$css=function(t,r){var a,i,o,l=this;return null==r&&(r=e),i=r["$nil?"](),(a=i!==!1&&i!==e?t["$is_a?"](null==(o=p.String)?n.cm("String"):o):i)===e||a._isBoolean&&1!=a?((a=t["$is_a?"](null==(i=p.Hash)?n.cm("Hash"):i))===e||a._isBoolean&&1!=a?l.css(t,r):l.css(t.$to_n()),l):l.css(t)},f.$animate=c=function(n){var t,r=this,a=c._p,i=a||e,o=e;c._p=null,o=function(){return(t=n["$has_key?"]("speed"))===e||t._isBoolean&&1!=t?400:n.$delete("speed")}(),r.animate(n.$to_n(),o,function(){!function(){return i!==e?i.$call():e}()})},f.$data=function(n){var t=this;n=a.call(arguments,0);var r=t.data.apply(t,n);return null==r?e:r},f.$effect=s=function(n,t){var r,i,o,l,u,c=this,$=s._p,_=$||e;return t=a.call(arguments,1),s._p=null,n=(r=(i=n).$gsub,r._p=(o=function(n){o._s||this;return null==n&&(n=e),n["$[]"](1).$upcase()},o._s=c,o),r).call(i,/_\w/),t=(r=(l=t).$map,r._p=(u=function(n){{var t;u._s||this}return null==n&&(n=e),(t=n["$respond_to?"]("to_n"))===e||t._isBoolean&&1!=t?e:n.$to_n()},u._s=c,u),r).call(l).$compact(),t["$<<"](function(){!function(){return _!==e?_.$call():e}()}),c[n].apply(c,t)},f["$visible?"]=function(){var n=this;return n.is(":visible")},f.$offset=function(){var n=this;return n.$Native(n.offset())},f.$each=_=function(){var t=this,a=_._p,i=a||e;_._p=null;for(var o=0,l=t.length;l>o;o++)if(n.$yield1(i,$(t[o]))===r)return r.$v;return t},f.$first=function(){var n=this;return n.length?n.first():e},f.$html=function(n){var t=this;return null!=n?t.html(n):t.html()||""},f.$id=function(){var n=this,t=n[0];return t&&t.id||""},f["$id="]=function(n){var t=this,e=t[0];return e&&(e.id=n),t},f.$tag_name=function(){var n=this;return n.length>0?n[0].tagName.toLowerCase():e},f.$inspect=function(){for(var n,t,e,r=this,a=[],i=0,o=r.length;o>i;i++)t=r[i],e="<"+t.tagName.toLowerCase(),(n=t.id)&&(e+=' id="'+n+'"'),(n=t.className)&&(e+=' class="'+n+'"'),a.push(e+">");return"#<Element ["+a.join(", ")+"]>"},f.$length=function(){var n=this;return n.length},f["$any?"]=function(){var n=this;return n.length>0},f["$empty?"]=function(){var n=this;return 0===n.length},n.defn(d,"$empty?",f["$none?"]),f.$on=v=function(t,r){var a,i=this,o=v._p,l=o||e;null==r&&(r=e),v._p=null;var u=function(t){return t.preventDefault&&(t=(null==(a=p.Event)?n.cm("Event"):a).$new(t)),l.apply(null,arguments)};return l._jq_wrap=u,r==e?i.on(t,u):i.on(t,r,u),l},f.$off=function(n,t,r){var a=this;return null==r&&(r=e),null==t?a.off(n):r===e?a.off(n,t._jq_wrap):a.off(n,t,r._jq_wrap)},n.defn(d,"$size",f.$length),f.$value=function(){var n=this;return n.val()||""},e&&"value"}(t,o)}(Opal),function(n){var t,e=(n.top,n),r=(n.nil,n.breaker,n.slice,n.gvars);return n.add_stubs(["$find"]),n.cdecl(e,"Window",(null==(t=e.Element)?n.cm("Element"):t).$find(window)),r.window=null==(t=e.Window)?n.cm("Window"):t}(Opal),function(n){var t,e=(n.top,n),r=n.nil,a=(n.breaker,n.slice,n.gvars);return n.add_stubs(["$find"]),n.cdecl(e,"Document",(null==(t=e.Element)?n.cm("Element"):t).$find(document)),function(t){{var e=t._scope;t._proto}return t._proto["$ready?"]=TMP_1=function(){var n=TMP_1._p,t=n||r;return TMP_1._p=null,t!==!1&&t!==r?$(t):r},t._proto.$title=function(){return document.title},t._proto["$title="]=function(n){return document.title=n},t._proto.$head=function(){var t;return(null==(t=e.Element)?n.cm("Element"):t).$find(document.head)},t._proto.$body=function(){var t;return(null==(t=e.Element)?n.cm("Element"):t).$find(document.body)},r&&"body"}((null==(t=e.Document)?n.cm("Document"):t).$singleton_class()),a.document=null==(t=e.Document)?n.cm("Document"):t}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.klass);return n.add_stubs(["$stop","$prevent"]),function(t,a){function i(){}{var o=i=r(t,a,"Event",i),l=o._proto;o._scope}return l["native"]=e,l.$initialize=function(n){var t=this;return t["native"]=n},l["$[]"]=function(n){var t=this;return t["native"][n]},l.$type=function(){var n=this;return n["native"].type},l.$current_target=function(){var n=this;return $(n["native"].currentTarget)},l.$target=function(){var n=this;return $(n["native"].target)},l["$prevented?"]=function(){var n=this;return n["native"].isDefaultPrevented()},l.$prevent=function(){var n=this;return n["native"].preventDefault()},l["$stopped?"]=function(){var n=this;return n["native"].propagationStopped()},l.$stop=function(){var n=this;return n["native"].stopPropagation()},l.$stop_immediate=function(){var n=this;return n["native"].stopImmediatePropagation()},l.$kill=function(){var n=this;return n.$stop(),n.$prevent()},n.defn(o,"$default_prevented?",l["$prevented?"]),n.defn(o,"$prevent_default",l.$prevent),n.defn(o,"$propagation_stopped?",l["$stopped?"]),n.defn(o,"$stop_propagation",l.$stop),n.defn(o,"$stop_immediate_propagation",l.$stop_immediate),l.$page_x=function(){var n=this;return n["native"].pageX},l.$page_y=function(){var n=this;return n["native"].pageY},l.$touch_x=function(){var n=this;return n["native"].originalEvent.touches[0].pageX},l.$touch_y=function(){var n=this;return n["native"].originalEvent.touches[0].pageY},l.$ctrl_key=function(){var n=this;return n["native"].ctrlKey},l.$key_code=function(){var n=this;return n["native"].keyCode},l.$which=function(){var n=this;return n["native"].which},e&&"which"}(t,null)}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.module),a=n.hash2,i=n.klass;return n.add_stubs(["$new","$push","$[]=","$[]","$create_id","$json_create","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$to_json","$responds_to?","$to_io","$write","$to_s","$strftime"]),function(t){function i(t,r){switch(typeof t){case"string":return t;case"number":return t;case"boolean":return!!t;case"null":return e;case"object":if(!t)return e;if(t._isArray){for(var a=r.array_class.$new(),l=0,c=t.length;c>l;l++)a.$push(i(t[l],r));return a}var $=r.object_class.$new();for(var _ in t)s.call(t,_)&&$["$[]="](_,i(t[_],r));var v;return(v=$["$[]"]((null==(o=u.JSON)?n.cm("JSON"):o).$create_id()))!=e?(v=Opal.cget(v),v.$json_create($)):$}}var o,l=r(t,"JSON"),u=(l._proto,l._scope),c=JSON.parse,s=Opal.hasOwnProperty;!function(n){n._scope,n._proto;return n.$attr_accessor("create_id")}(l.$singleton_class()),l["$create_id="]("json_class"),n.defs(l,"$[]",function(t,r){var i,o,l=this;return null==r&&(r=a([],{})),(i=(null==(o=u.String)?n.cm("String"):o)["$==="](t))===e||i._isBoolean&&1!=i?l.$generate(t,r):l.$parse(t,r)}),n.defs(l,"$parse",function(n,t){var e=this;return null==t&&(t=a([],{})),e.$from_object(c(n),t)}),n.defs(l,"$parse!",function(n,t){var e=this;return null==t&&(t=a([],{})),e.$parse(n,t)}),n.defs(l,"$from_object",function(t,r){var o,l,c,s;return null==r&&(r=a([],{})),o="object_class",l=r,(c=l["$[]"](o))!==!1&&c!==e?c:l["$[]="](o,null==(s=u.Hash)?n.cm("Hash"):s),o="array_class",l=r,(c=l["$[]"](o))!==!1&&c!==e?c:l["$[]="](o,null==(s=u.Array)?n.cm("Array"):s),i(t,r.map)}),n.defs(l,"$generate",function(n,t){return null==t&&(t=a([],{})),n.$to_json(t)}),n.defs(l,"$dump",function(n,t,r){var a,i=this,o=e;return null==t&&(t=e),null==r&&(r=e),o=i.$generate(n),t!==!1&&t!==e?((a=t["$responds_to?"]("to_io"))===e||a._isBoolean&&1!=a||(t=t.$to_io()),t.$write(o),t):o})}(t),function(t,r){function a(){}{var o=a=i(t,r,"Object",a);o._proto,o._scope}return n.defn(o,"$to_json",function(){var n=this;return n.$to_s().$to_json()}),e&&"to_json"}(t,null),function(n,t){function r(){}{var a=r=i(n,t,"Array",r),o=a._proto;a._scope}return o.$to_json=function(){for(var n=this,t=[],e=0,r=n.length;r>e;e++)t.push(n[e].$to_json());return"["+t.join(", ")+"]"},e&&"to_json"}(t,null),function(n,t){function r(){}{var a=r=i(n,t,"Boolean",r),o=a._proto;a._scope}return o.$to_json=function(){var n=this;return 1==n?"true":"false"},e&&"to_json"}(t,null),function(n,t){function r(){}{var a=r=i(n,t,"Hash",r),o=a._proto;a._scope}return o.$to_json=function(){for(var n=this,t=[],e=n.keys,r=n.map,a=0,i=e.length;i>a;a++){var o=e[a];t.push(o.$to_s().$to_json()+":"+r[o].$to_json())}return"{"+t.join(", ")+"}"},e&&"to_json"}(t,null),function(n,t){function r(){}{var a=r=i(n,t,"NilClass",r),o=a._proto;a._scope}return o.$to_json=function(){return"null"},e&&"to_json"}(t,null),function(n,t){function r(){}{var a=r=i(n,t,"Numeric",r),o=a._proto;a._scope}return o.$to_json=function(){var n=this;return n.toString()},e&&"to_json"}(t,null),function(t,e){function r(){}{var a=r=i(t,e,"String",r),o=a._proto;a._scope}return n.defn(a,"$to_json",o.$inspect)}(t,null),function(n,t){function r(){}{var a=r=i(n,t,"Time",r),o=a._proto;a._scope}return o.$to_json=function(){var n=this;return n.$strftime("%FT%T%z").$to_json()},e&&"to_json"}(t,null),function(n,t){function r(){}{var a=r=i(n,t,"Date",r),o=a._proto;a._scope}return o.$to_json=function(){var n=this;return n.$to_s().$to_json()},o.$as_json=function(){var n=this;return n.$to_s()},e&&"as_json"}(t,null)}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.klass),a=n.hash2;return n.add_stubs(["$attr_reader","$send!","$new","$delete","$to_n","$from_object","$succeed","$fail","$call","$parse","$xhr"]),function(t,i){function o(){}var l,u,c,s,_,v,d=o=r(t,i,"HTTP",o),f=d._proto,p=d._scope;return f.errback=f.json=f.body=f.ok=f.settings=f.callback=e,d.$attr_reader("body","error_message","method","status_code","url","xhr"),n.defs(d,"$get",l=function(n,t){var r=this,i=l._p,o=i||e;return null==t&&(t=a([],{})),l._p=null,r.$new(n,"GET",t,o)["$send!"]()}),n.defs(d,"$post",u=function(n,t){var r=this,i=u._p,o=i||e;return null==t&&(t=a([],{})),u._p=null,r.$new(n,"POST",t,o)["$send!"]()}),n.defs(d,"$put",c=function(n,t){var r=this,i=c._p,o=i||e;return null==t&&(t=a([],{})),c._p=null,r.$new(n,"PUT",t,o)["$send!"]()}),n.defs(d,"$delete",s=function(n,t){var r=this,i=s._p,o=i||e;return null==t&&(t=a([],{})),s._p=null,r.$new(n,"DELETE",t,o)["$send!"]()}),f.$initialize=function(t,r,a,i){var o,l=this,u=e,c=e,s=e;return null==i&&(i=e),l.url=t,l.method=r,l.ok=!0,l.xhr=e,u=l,c=a.$delete("payload"),s=a.$to_n(),i!==!1&&i!==e&&(l.callback=l.errback=i),"string"==typeof c?s.data=c:c!=e&&(s.data=c.$to_json(),s.contentType="application/json"),s.url=t,s.type=r,s.success=function(t,e,r){return u.body=t,u.xhr=r,u.status_code=r.status,"object"==typeof t&&(u.json=(null==(o=p.JSON)?n.cm("JSON"):o).$from_object(t)),u.$succeed()},s.error=function(n){return u.body=n.responseText,u.xhr=n,u.status_code=n.status,u.$fail()},l.settings=s},f.$callback=_=function(){var n=this,t=_._p,r=t||e;return _._p=null,n.callback=r,n},f.$errback=v=function(){var n=this,t=v._p,r=t||e;return v._p=null,n.errback=r,n},f.$fail=function(){var n,t=this;return t.ok=!1,(n=t.errback)===e||n._isBoolean&&1!=n?e:t.errback.$call(t)},f.$json=function(){var t,r,a=this;return(t=a.json)!==!1&&t!==e?t:(null==(r=p.JSON)?n.cm("JSON"):r).$parse(a.body)},f["$ok?"]=function(){var n=this;return n.ok},f["$send!"]=function(){var n=this;return $.ajax(n.settings),n},f.$succeed=function(){var n,t=this;return(n=t.callback)===e||n._isBoolean&&1!=n?e:t.callback.$call(t)},f.$get_header=function(n){var t=this;return t.$xhr().getResponseHeader(n)},e&&"get_header"}(t,null)}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.module);return n.add_stubs([]),function(t){{var a=r(t,"Kernel"),i=a._proto;a._scope}i.$alert=function(n){return alert(n),e},n.donate(a,["$alert"])}(t)}(Opal),function(n){n.top,n.nil,n.breaker,n.slice;return n.add_stubs([]),!0}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.module),a=n.klass,i=n.hash2;return n.add_stubs(["$[]","$[]=","$call"]),function(n){{var t=r(n,"Dare");t._proto,t._scope}!function(n,t){function r(){}{var o,l=r=a(n,t,"Clock",r),u=l._proto;l._scope}return u.update_interval=u.interval=e,u.$initialize=function(n){var t,r,a,o=this;return null==n&&(n=i([],{})),t="update_interval",r=n,(a=r["$[]"](t))!==!1&&a!==e?a:r["$[]="](t,16.666),o.update_interval=n["$[]"]("update_interval")},u.$start=o=function(){var n=this,t=o._p,r=t||e;return o._p=null,n.interval=setInterval(function(){r.$call()},n.update_interval)},u.$stop=function(){var n=this;return clearInterval(n.interval)},e&&"stop"}(t,null)}(t)}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.module),a=n.klass;return n.add_stubs([]),function(n){{var t=r(n,"Dare");t._proto,t._scope}!function(n,t){function r(){}{var i=r=a(n,t,"Sound",r),o=i._proto;i._scope}return o.file=e,o.$initialize=function(n){var t=this,e=new Audio(n);return e.volume=.3,t.file=e},o.$play=function(){var n=this;n.file.play()},e&&"play"}(t,null)}(t)}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.module),a=n.klass;return n.add_stubs(["$default_window","$context","$canvas"]),function(t){{var i=r(t,"Dare");i._proto,i._scope}!function(t,r){function i(){}var o=i=a(t,r,"Font",i),l=o._proto,u=o._scope;return l.window=l.font=l.color=l.x=l.y=e,l.$initialize=function(t,e){var r,a=this;return null==t&&(t=(null==(r=u.Dare)?n.cm("Dare"):r).$default_window()),null==e&&(e="30px Arial"),a.window=t,a.font=e,a.color="red",a.x=50,a.y=50},l.$draw=function(n,t,e){var r=this;null==n&&(n=""),null==t&&(t=r.x),null==e&&(e=r.y),r.window.$canvas().$context().font=r.font,r.window.$canvas().$context().fillStyle=r.color,r.window.$canvas().$context().fillText(n,t,e)},e&&"draw"}(i,null)}(t)}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.module),a=n.klass;return n.add_stubs(["$attr_accessor","$default_window","$draw","$[]","$button_down?","$walk","$stand","$==","$>=","$+"]),function(t){{var i=r(t,"Dare");i._proto,i._scope}!function(t,r){function i(){}var o=i=a(t,r,"Sprite",i),l=o._proto,u=o._scope;return l.images=l.current_image=l.window=l.ticks_on_current_image=e,o.$attr_accessor("images"),l.$initialize=function(t){var e,r=this;return null==t&&(t=(null==(e=u.Dare)?n.cm("Dare"):e).$default_window()),r.window=t,r.images=[],r.state=[],r.current_image=0,r.ticks_on_current_image=0,r.x=0,r.y=0},l.$draw=function(n,t){var e=this;return null==n&&(n=0),null==t&&(t=0),e.images["$[]"](e.current_image).$draw(n,t)},l.$update=function(){var t,r,a,i=this;return(t=i.window["$button_down?"](null==(r=(null==(a=u.Dare)?n.cm("Dare"):a)._scope).KbRight?r.cm("KbRight"):r.KbRight))===e||t._isBoolean&&1!=t?i.$stand():i.$walk()},l.$walk=function(){var n=this;return n.current_image["$=="](0)?(n.current_image=2,n.ticks_on_current_image=0):n.current_image["$=="](2)?n.ticks_on_current_image["$>="](5)?(n.current_image=3,n.ticks_on_current_image=0):n.ticks_on_current_image=n.ticks_on_current_image["$+"](1):n.current_image["$=="](3)?n.ticks_on_current_image["$>="](5)?(n.current_image=4,n.ticks_on_current_image=0):n.ticks_on_current_image=n.ticks_on_current_image["$+"](1):n.current_image["$=="](4)?n.ticks_on_current_image["$>="](5)?(n.current_image=2,n.ticks_on_current_image=0):n.ticks_on_current_image=n.ticks_on_current_image["$+"](1):e},l.$stand=function(){var n=this;return n.current_image=0,n.ticks_on_current_image=0},e&&"stand"}(i,null)}(t)}(Opal),function(n){var t=n.top,e=n.nil,r=(n.breaker,n.slice,n.module),a=n.klass,i=n.hash2;return n.add_stubs(["$attr_reader","$[]","$[]=","$to_s","$rand","$**","$new","$add_mouse_event_listener","$add_keyboard_event_listeners","$update","$context","$width","$height","$draw","$+","$stop","$on","$get_cursor_position","$x","$find","$id","$get_key_id","$page_x","$page_y","$Document","$scrollLeft","$documentElement","$scrollTop","$body","$-","$canvas","$default_window"]),function(t){var o,l=r(t,"Dare"),u=(l._proto,l._scope);n.cdecl(u,"KbRight",39),n.cdecl(u,"KbLeft",37),function(n,t){function r(){}{var o=r=a(n,t,"Canvas",r),l=o._proto;o._scope}return l.id=l.canvas=e,o.$attr_reader("id","canvas"),l.$initialize=function(n){var t,r,a,o=this;null==n&&(n=i([],{})),t="width",r=n,(a=r["$[]"](t))!==!1&&a!==e?a:r["$[]="](t,640),t="height",r=n,(a=r["$[]"](t))!==!1&&a!==e?a:r["$[]="](t,480),t="border",r=n,(a=r["$[]"](t))!==!1&&a!==e?a:r["$[]="](t,!1);var l=document.createElement("canvas");return o.id=o.$rand(36["$**"](8)).$to_s(36),l.setAttribute("id",o.id),l.width=n["$[]"]("width"),l.height=n["$[]"]("height"),(t=n["$[]"]("border"))===e||t._isBoolean&&1!=t||(l.style.border="solid 1px black"),document.body.appendChild(l),o.canvas=l},l.$context=function(){var n=this;return n.canvas.getContext("2d")},e&&"context"}(l,null),function(t,r){function o(){}var l=o=a(t,r,"Window",o),u=l._proto,c=l._scope;return u.canvas=u.ticks=u.clock=u.keys=e,l.$attr_reader("width","height","ticks","mouse_x","mouse_y","canvas","key"),u.$initialize=function(t){var r,a,o,l,u=this;return null==t&&(t=i([],{})),r="width",a=t,(o=a["$[]"](r))!==!1&&o!==e?o:a["$[]="](r,640),r="height",a=t,(o=a["$[]"](r))!==!1&&o!==e?o:a["$[]="](r,480),r="update_interval",a=t,(o=a["$[]"](r))!==!1&&o!==e?o:a["$[]="](r,16.666666),r="border",a=t,(o=a["$[]"](r))!==!1&&o!==e?o:a["$[]="](r,!1),r="clock",a=t,(o=a["$[]"](r))!==!1&&o!==e?o:a["$[]="](r,(null==(l=c.Clock)?n.cm("Clock"):l).$new(i(["update_interval"],{update_interval:t["$[]"]("update_interval")}))),r="canvas",a=t,(o=a["$[]"](r))!==!1&&o!==e?o:a["$[]="](r,(null==(l=c.Canvas)?n.cm("Canvas"):l).$new(i(["width","height","border"],{width:t["$[]"]("width"),height:t["$[]"]("height"),border:t["$[]"]("border")}))),r="no_mouse",a=t,(o=a["$[]"](r))!==!1&&o!==e?o:a["$[]="](r,!1),u.width=t["$[]"]("width"),u.height=t["$[]"]("height"),u.clock=t["$[]"]("clock"),u.ticks=0,u.canvas=t["$[]"]("canvas"),u.keys=(null==(r=c.Array)?n.cm("Array"):r).$new(108),((r=t["$[]"]("no_mouse"))===e||r._isBoolean&&1!=r)&&u.$add_mouse_event_listener(),u.$add_keyboard_event_listeners()
},u["$run!"]=function(){function n(){requestAnimationFrame(n),t.$update(),t.canvas.$context().clearRect(0,0,t.$width(),t.$height()),t.$draw()}var t=this;requestAnimationFrame(n)},u.$update=function(){var n=this;return n.ticks=n.ticks["$+"](1)},u["$stop!"]=function(){var n=this;return n.clock.$stop()},u.$add_mouse_event_listener=function(){var t,r,a,i,o=this;return(t=(r=(null==(i=c.Element)?n.cm("Element"):i).$find("#"+o.canvas.$id())).$on,t._p=(a=function(n){var t=a._s||this,r=e;return null==n&&(n=e),r=t.$get_cursor_position(n),t.mouse_x=r.$x()["$[]"]("x"),t.mouse_y=r.$x()["$[]"]("y")},a._s=o,a),t).call(r,"mousemove")},u.$add_keyboard_event_listeners=function(){var t,r,a,i,o,l,u=this;return(t=(r=(null==(i=c.Element)?n.cm("Element"):i).$find("html")).$on,t._p=(a=function(n){var t=a._s||this;return null==t.keys&&(t.keys=e),null==n&&(n=e),t.keys["$[]="](t.$get_key_id(n),!0)},a._s=u,a),t).call(r,"keydown"),(t=(i=(null==(l=c.Element)?n.cm("Element"):l).$find("html")).$on,t._p=(o=function(n){var t=o._s||this;return null==t.keys&&(t.keys=e),null==n&&(n=e),t.keys["$[]="](t.$get_key_id(n),!1)},o._s=u,o),t).call(i,"keyup")},u["$button_down?"]=function(n){var t=this;return t.keys["$[]"](n)},u.$get_cursor_position=function(t){var r,a,o=this,l=e,u=e,s=e;return a=t.$page_x(),(r=a!==!1&&a!==e?t.$page_y():a)===e||r._isBoolean&&1!=r?(s=(null==(r=c.Opal)?n.cm("Opal"):r).$Document()["$[]"](0),l=t["$[]"]("clientX")["$+"](s.$scrollLeft())["$+"](s.$documentElement().$scrollLeft()),u=t["$[]"]("clientY")["$+"](s.$body().$scrollTop())["$+"](s.$documentElement().$scrollTop())):(l=t.$page_x(),u=t.$page_y()),l=l["$-"](o.canvas.$canvas().offsetLeft),u=u["$-"](o.canvas.$canvas().offsetTop),(null==(r=c.Coordinates)?n.cm("Coordinates"):r).$new(i(["x","y"],{x:l,y:u}))},u.$get_key_id=function(n){return n["$[]"]("keyCode")},u.$draw_rect=function(n){var t=this,r=e,a=e,o=e,l=e,u=e;return null==n&&(n=i([],{})),r=n["$[]"]("top_left")["$[]"](0),a=n["$[]"]("top_left")["$[]"](1),o=n["$[]"]("width"),l=n["$[]"]("height"),u=n["$[]"]("color"),t.canvas.$context().fillStyle=u,t.canvas.$context().fillRect(r,a,o,l)},e&&"draw_rect"}(l,null),function(n,t){function r(){}{var i=r=a(n,t,"Coordinates",r);i._proto,i._scope}return e}(l,(null==(o=u.Struct)?n.cm("Struct"):o).$new("x","y")),function(t,r){function i(){}var o=i=a(t,r,"Image",i),l=o._proto,u=o._scope;return l.img=l.window=e,l.$initialize=function(t,e){var r,a=this;return null==t&&(t=""),null==e&&(e=(null==(r=u.Dare)?n.cm("Dare"):r).$default_window()),a.img=new Image,a.img.src=t,a.window=e},l.$draw=function(n,t){var e=this;return null==n&&(n=0),null==t&&(t=0),e.window.$canvas().$context().drawImage(e.img,n,t)},e&&"draw"}(l,null)}(t)}(Opal),function(n){var t=n.top,e=(n.nil,n.breaker,n.slice,n.module);return n.add_stubs(["$attr_accessor"]),function(t){var r=e(t,"Dare"),a=(r._proto,r._scope);n.cdecl(a,"VERSION","0.0.9"),n.defs(r,"$offset_x",function(n,t){return t*Math.cos(n*Math.PI/180)}),n.defs(r,"$offset_y",function(n,t){return t*Math.sin(n*Math.PI/180)}),n.defs(r,"$ms",function(){return(new Date).getTime()}),function(n){n._scope,n._proto;return n.$attr_accessor("default_window")}(r.$singleton_class())}(t)}(Opal),function(n){var t,e,r=n.top,a=n,i=n.nil,o=(n.breaker,n.slice,n.klass),l=n.hash2,u=n.range;return n.add_stubs(["$attr_reader","$parse","$[]","$load_images","$default_window","$[]=","$new","$attr_accessor","$button_down?","$+","$-","$<","$default_window=","$<<","$images","$draw_background","$draw_tiles","$draw","$*","$update","$draw_rect","$background_color","$x","$each","$run!"]),function(t,e){function r(){}var a=r=o(t,e,"Level",r),u=a._proto,c=a._scope;return u.data=u.images=i,a.$attr_reader("background_color","images"),u.$initialize=function(t,e){var r,a=this;return null==e&&(e=(null==(r=c.Dare)?n.cm("Dare"):r).$default_window()),a.data=(null==(r=c.JSON)?n.cm("JSON"):r).$parse('{\n  "id":"level1",\n  "background_color":"#6f84ff",\n  "tiles":{\n    "bricks":{\n      "ground":[[0,12,16,12],[0,13,14,13]],\n      "question_mark":[[8,16]]\n    },\n    "background":{\n      "hill_5":[[0,8]],\n      "shrub_5":[[11,10]],\n      "hill_3":[[16,9]]\n    }\n  }\n}'),a.background_color=a.data["$[]"]("background_color"),a.tiles=a.data["$[]"]("tiles"),a.window=e,a.$load_images()},u.$load_images=function(){var t,e,r=this;return r.images=l([],{}),r.images["$[]="]("block_ground",(null==(t=(null==(e=c.Dare)?n.cm("Dare"):e)._scope).Image?t.cm("Image"):t.Image).$new("assets/block_ground.png")),r.images["$[]="]("bg_hill_5",(null==(t=(null==(e=c.Dare)?n.cm("Dare"):e)._scope).Image?t.cm("Image"):t.Image).$new("assets/bg_hill_5.png")),r.images["$[]="]("bg_shrub_5",(null==(t=(null==(e=c.Dare)?n.cm("Dare"):e)._scope).Image?t.cm("Image"):t.Image).$new("assets/bg_shrub_5.png"))},i&&"load_images"}(r,null),function(t,e){function r(){}var a=r=o(t,e,"Camera",r),l=a._proto,u=a._scope;return l.window=l.x=i,a.$attr_accessor("x"),l.$initialize=function(t){var e,r=this;return null==t&&(t=(null==(e=u.Dare)?n.cm("Dare"):e).$default_window()),r.window=t,r.x=0},l.$update=function(){var t,e,r,a=this;return(t=a.window["$button_down?"](null==(e=(null==(r=u.Dare)?n.cm("Dare"):r)._scope).KbRight?e.cm("KbRight"):e.KbRight))===i||t._isBoolean&&1!=t||(a.x=a.x["$+"](2)),(t=a.window["$button_down?"](null==(e=(null==(r=u.Dare)?n.cm("Dare"):r)._scope).KbLeft?e.cm("KbLeft"):e.KbLeft))===i||t._isBoolean&&1!=t||(a.x=a.x["$-"](2)),a.x["$<"](0)?a.x=0:i},i&&"update"}(r,null),function(t,e){function r(){}var a,c=r=o(t,e,"Game",r),s=c._proto,$=c._scope;return s.mario=s.camera=s.level=i,n.cdecl($,"WIDTH",256),n.cdecl($,"HEIGHT",224),n.cdecl($,"TILE_WIDTH",16),s.$initialize=a=function(){{var t,e,r=this;a._p}return a._p=null,n.find_super_dispatcher(r,"initialize",a,null).apply(r,[l(["width","height","border"],{width:null==(t=$.WIDTH)?n.cm("WIDTH"):t,height:null==(t=$.HEIGHT)?n.cm("HEIGHT"):t,border:!0})]),(null==(t=$.Dare)?n.cm("Dare"):t)["$default_window="](r),r.level=(null==(t=$.Level)?n.cm("Level"):t).$new("level1.json"),r.camera=(null==(t=$.Camera)?n.cm("Camera"):t).$new(),r.font=(null==(t=(null==(e=$.Dare)?n.cm("Dare"):e)._scope).Font?t.cm("Font"):t.Font).$new("16px Arial"),r.mario=(null==(t=(null==(e=$.Dare)?n.cm("Dare"):e)._scope).Sprite?t.cm("Sprite"):t.Sprite).$new(),r.mario.$images()["$<<"]((null==(t=(null==(e=$.Dare)?n.cm("Dare"):e)._scope).Image?t.cm("Image"):t.Image).$new("assets/mario_stand_right.png")),r.mario.$images()["$<<"]((null==(t=(null==(e=$.Dare)?n.cm("Dare"):e)._scope).Image?t.cm("Image"):t.Image).$new("assets/mario_stop_right.png")),r.mario.$images()["$<<"]((null==(t=(null==(e=$.Dare)?n.cm("Dare"):e)._scope).Image?t.cm("Image"):t.Image).$new("assets/mario_walk_right_1.png")),r.mario.$images()["$<<"]((null==(t=(null==(e=$.Dare)?n.cm("Dare"):e)._scope).Image?t.cm("Image"):t.Image).$new("assets/mario_walk_right_2.png")),r.mario.$images()["$<<"]((null==(t=(null==(e=$.Dare)?n.cm("Dare"):e)._scope).Image?t.cm("Image"):t.Image).$new("assets/mario_walk_right_3.png"))},s.$draw=function(){var t,e=this;return e.$draw_background(),e.$draw_tiles(),e.mario.$draw((null==(t=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):t)["$*"](3),(null==(t=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):t)["$*"](11))},s.$update=function(){var n=this;return n.camera.$update(),n.mario.$update()},s.$draw_background=function(){var t,e=this;return e.$draw_rect(l(["top_left","width","height","color"],{top_left:[0,0],width:null==(t=$.WIDTH)?n.cm("WIDTH"):t,height:null==(t=$.HEIGHT)?n.cm("HEIGHT"):t,color:e.level.$background_color()}))},s.$draw_tiles=function(){var t,e,r,a=this;return a.level.$images()["$[]"]("bg_hill_5").$draw((null==(t=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):t)["$*"](0)["$-"](a.camera.$x()),(null==(t=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):t)["$*"](9)),a.level.$images()["$[]"]("bg_shrub_5").$draw((null==(t=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):t)["$*"](11)["$-"](a.camera.$x()),(null==(t=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):t)["$*"](11)),(t=(e=u(0,16,!1)).$each,t._p=(r=function(t){var e,a=r._s||this;return null==a.level&&(a.level=i),null==a.camera&&(a.camera=i),null==t&&(t=i),a.level.$images()["$[]"]("block_ground").$draw((null==(e=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):e)["$*"](t)["$-"](a.camera.$x()),(null==(e=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):e)["$*"](12)),a.level.$images()["$[]"]("block_ground").$draw((null==(e=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):e)["$*"](t)["$-"](a.camera.$x()),(null==(e=$.TILE_WIDTH)?n.cm("TILE_WIDTH"):e)["$*"](13))},r._s=a,r),t).call(e)},i&&"draw_tiles"}(r,null==(t=(null==(e=a.Dare)?n.cm("Dare"):e)._scope).Window?t.cm("Window"):t.Window),(null==(t=a.Game)?n.cm("Game"):t).$new()["$run!"]()}(Opal);